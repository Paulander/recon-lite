DEBUG: KRK_NODES MODULE LOADED
Building unified graph...
Position: 8/8/8/4k3/8/8/4P3/4K3 w - - 0 1

=== KPK structure ===
kpk_root children: ['kpk_detect', 'kpk_execute', 'kpk_finish', 'kpk_wait']
kpk_execute predecessors: ['kpk_detect']
kpk_detect children: ['kpk_material_check', 'kpk_push_window']

Requested: kpk_root

=== Initial state ===
  kpk_root: REQUESTED [pred:NO]
  kpk_detect: INACTIVE [pred:NO]
  kpk_execute: INACTIVE [pred:NO]
  kpk_finish: INACTIVE [pred:NO]
  kpk_wait: INACTIVE [pred:NO]
  kpk_material_check: INACTIVE [pred:YES]
  kpk_push_window: INACTIVE [pred:YES]
  kpk_move_selector: INACTIVE [pred:YES]

=== After tick 1 ===
  kpk_root: WAITING
  kpk_detect: WAITING
  kpk_execute: INACTIVE
  kpk_finish: INACTIVE
  kpk_wait: INACTIVE
  kpk_material_check: REQUESTED
  kpk_push_window: REQUESTED
  kpk_move_selector: INACTIVE
  [kpk_execute POR gate: False, preds: ['kpk_detect=WAITING']]

=== After tick 2 ===
  kpk_root: WAITING
  kpk_detect: CONFIRMED
  kpk_execute: WAITING
  kpk_finish: INACTIVE
  kpk_wait: INACTIVE
  kpk_material_check: WAITING
  kpk_push_window: WAITING
  kpk_move_selector: REQUESTED
  [kpk_execute POR gate: True, preds: ['kpk_detect=CONFIRMED']]

=== After tick 3 ===
  kpk_root: WAITING
  kpk_detect: CONFIRMED
  kpk_execute: CONFIRMED
  kpk_finish: WAITING
  kpk_wait: INACTIVE
  kpk_material_check: TRUE
  kpk_push_window: TRUE
  kpk_move_selector: WAITING
  [kpk_execute POR gate: True, preds: ['kpk_detect=CONFIRMED']]
DEBUG: KPK_MOVE_SELECTOR called

=== After tick 4 ===
  kpk_root: WAITING
  kpk_detect: CONFIRMED
  kpk_execute: CONFIRMED
  kpk_finish: CONFIRMED
  kpk_wait: WAITING
  kpk_material_check: CONFIRMED
  kpk_push_window: CONFIRMED
  kpk_move_selector: TRUE
  [kpk_execute POR gate: True, preds: ['kpk_detect=CONFIRMED']]

*** MOVE FOUND: e1f2 ***

=== Environment state ===
  kpk.material: {'is_kpk': True, 'attacker_color': True, 'pawn_square': 12, 'attacker_king': 4, 'defender_king': 36}
  kpk.policy: {'suggested_move': 'e1f2'}
