# ReCoN-lite Architecture

> A visual and structural guide to the Request-Confirmation Network for chess

---

## 1. System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ReCoN-lite Chess System                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Core ReCoN     â”‚    â”‚  Chess Domain   â”‚    â”‚    Training     â”‚         â”‚
â”‚  â”‚  Engine         â”‚â—„â”€â”€â–ºâ”‚  Layer          â”‚â—„â”€â”€â–ºâ”‚    System       â”‚         â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚         â”‚
â”‚  â”‚  â€¢ Graph        â”‚    â”‚  â€¢ KRK/KPK/KQK  â”‚    â”‚  â€¢ Evolution    â”‚         â”‚
â”‚  â”‚  â€¢ Engine       â”‚    â”‚  â€¢ Affordance   â”‚    â”‚  â€¢ Curriculum   â”‚         â”‚
â”‚  â”‚  â€¢ Plasticity   â”‚    â”‚  â€¢ Features     â”‚    â”‚  â€¢ Snapshots    â”‚         â”‚
â”‚  â”‚  â€¢ Stem Cells   â”‚    â”‚  â€¢ Actuators    â”‚    â”‚  â€¢ Traces       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Directory Structure

```
recon-lite/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ recon_lite/                 # Core ReCoN Engine
â”‚   â”‚   â”œâ”€â”€ graph.py                # Node, Edge, Graph, LinkType
â”‚   â”‚   â”œâ”€â”€ engine.py               # ReConEngine state machine
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ activations.py      # Continuous activation values
â”‚   â”‚   â”œâ”€â”€ nodes/
â”‚   â”‚   â”‚   â””â”€â”€ stem_cell.py        # â­ Stem cell lifecycle + XP
â”‚   â”‚   â”œâ”€â”€ learning/
â”‚   â”‚   â”‚   â””â”€â”€ m5_structure.py     # â­ Structure learning + POR discovery
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ registry.py         # Topology persistence
â”‚   â”‚   â”œâ”€â”€ plasticity/
â”‚   â”‚   â”‚   â”œâ”€â”€ fast.py             # M3 within-game learning
â”‚   â”‚   â”‚   â”œâ”€â”€ bandit.py           # UCB gating
â”‚   â”‚   â”‚   â””â”€â”€ consolidate.py      # M4 cross-game learning
â”‚   â”‚   â”œâ”€â”€ motifs/
â”‚   â”‚   â”‚   â”œâ”€â”€ extractors.py       # Pattern extraction
â”‚   â”‚   â”‚   â””â”€â”€ induction.py        # Pattern induction
â”‚   â”‚   â”œâ”€â”€ trust/
â”‚   â”‚   â”‚   â””â”€â”€ scoring.py          # Trust computation
â”‚   â”‚   â””â”€â”€ viz/
â”‚   â”‚       â””â”€â”€ evolution_viz.py    # Graph visualization
â”‚   â”‚
â”‚   â””â”€â”€ recon_lite_chess/           # Chess Domain
â”‚       â”œâ”€â”€ scripts/
â”‚       â”‚   â”œâ”€â”€ kpk.py              # â­ KPK endgame network
â”‚       â”‚   â”œâ”€â”€ kqk.py              # KQK endgame network
â”‚       â”‚   â””â”€â”€ tactics.py          # Tactical patterns
â”‚       â”œâ”€â”€ training/
â”‚       â”‚   â”œâ”€â”€ curriculum.py       # Phase management
â”‚       â”‚   â””â”€â”€ generators.py       # â­ Position generators + stages
â”‚       â”œâ”€â”€ affordance/
â”‚       â”‚   â””â”€â”€ sensors.py          # Continuous affordance signals
â”‚       â””â”€â”€ features/
â”‚           â””â”€â”€ hub.py              # Global FeatureHub
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ evolution_driver.py         # â­ Main training loop
â”‚
â”œâ”€â”€ topologies/
â”‚   â””â”€â”€ kpk_topology.json           # Base network definition
â”‚
â”œâ”€â”€ snapshots/
â”‚   â””â”€â”€ evolution/                  # â­ Training history
â”‚       â”œâ”€â”€ {run_name}/
â”‚       â”‚   â”œâ”€â”€ stage0/
â”‚       â”‚   â”‚   â”œâ”€â”€ cycle_0001.json
â”‚       â”‚   â”‚   â””â”€â”€ stem_cells.json
â”‚       â”‚   â””â”€â”€ stage1/...
â”‚
â””â”€â”€ weights/                        # Trained weight packs
```

---

## 3. ReCoN Graph Model

### 3.1 Node Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NODE TYPES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        SCRIPT         â”‚              TERMINAL                   â”‚
â”‚   (Intermediate Goal) â”‚         (Sensor/Actuator)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚     â–¡           â”‚  â”‚  â”‚     â—‹           â”‚   â—‹ = Sensor      â”‚
â”‚  â”‚  Script Node    â”‚  â”‚  â”‚  Terminal Node  â”‚   â—† = Actuator    â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚                 â”‚                   â”‚
â”‚  â”‚  Can have:      â”‚  â”‚  â”‚  Can only:      â”‚                   â”‚
â”‚  â”‚  â€¢ SUB children â”‚  â”‚  â”‚  â€¢ Receive SUB  â”‚                   â”‚
â”‚  â”‚  â€¢ POR sequence â”‚  â”‚  â”‚  â€¢ Send SUR     â”‚                   â”‚
â”‚  â”‚  â€¢ Aggregation  â”‚  â”‚  â”‚  â€¢ Has predicateâ”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Link Types

```
            SUB (Subgraph)                    POR (Predecessor)
            Parent â†’ Child                    Previous â†’ Next
            Top-down request                  Temporal ordering

                 â”Œâ”€â”€â”€â”                            â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”
                 â”‚ P â”‚                            â”‚ A â”‚â”€â”€â”€â”€â–ºâ”‚ B â”‚
                 â””â”€â”¬â”€â”˜                            â””â”€â”€â”€â”˜     â””â”€â”€â”€â”˜
                   â”‚ SUB                          
              â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”                     Sequence: A must confirm
              â–¼    â–¼    â–¼                     before B can activate
            â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”
            â”‚ C â”‚â”‚ C â”‚â”‚ C â”‚
            â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜


            SUR (Super)                       RET (Return)
            Child â†’ Parent                    Next â†’ Previous
            Bottom-up confirmation            Temporal confirmation

                 â”Œâ”€â”€â”€â”                            â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”
                 â”‚ P â”‚                            â”‚ A â”‚â—„â”€â”€â”€â”€â”‚ B â”‚
                 â””â”€â”€â”€â”˜                            â””â”€â”€â”€â”˜     â””â”€â”€â”€â”˜
                   â–² SUR
              â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”                     Return confirmation
              â”‚    â”‚    â”‚
            â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”
            â”‚ C â”‚â”‚ C â”‚â”‚ C â”‚
            â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜
```

### 3.3 Node States

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  INACTIVE   â”‚ â—„â”€â”€ Initial state
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ request
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”‚  REQUESTED  â”‚â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
            â”‚ satisfied                   â”‚ blocked
            â–¼                             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   ACTIVE    â”‚              â”‚  WAITING    â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚                            â”‚
            â”‚ children confirm           â”‚ POR satisfied
            â–¼                            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    TRUE     â”‚              â”‚  ACTIVE     â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ propagate up
            â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  CONFIRMED  â”‚              â”‚   FAILED    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. KPK Backbone Network

The KPK (King + Pawn vs King) endgame network demonstrates the core ReCoN structure.

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   kpk_root    â”‚ SCRIPT
                              â”‚   (backbone)  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ SUB                     â”‚ SUB                     â”‚ SUB
            â–¼                         â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  kpk_detect   â”‚ â”€â”€PORâ”€â–º â”‚  kpk_execute  â”‚ â”€â”€PORâ”€â–º â”‚  kpk_finish   â”‚
    â”‚   (backbone)  â”‚         â”‚   (backbone)  â”‚         â”‚   (backbone)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚                         â”‚
      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                   â”‚
      â”‚ SUB       â”‚ SUB         â”‚ SUB       â”‚ SUB               â”‚ SUB
      â–¼           â–¼             â–¼           â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ material â”‚ â”‚  push    â”‚ â”‚  move    â”‚ â”‚oppositionâ”‚    â”‚  promotion   â”‚
â”‚  check   â”‚ â”‚ window   â”‚ â”‚ selector â”‚ â”‚  probe   â”‚    â”‚    probe     â”‚
â”‚    â—‹     â”‚ â”‚    â—‹     â”‚ â”‚    â—†     â”‚ â”‚    â—‹     â”‚    â”‚      â—‹       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  TERMINAL     TERMINAL     TERMINAL     TERMINAL          TERMINAL
   sensor       sensor      actuator      sensor            sensor


    Legend:
    â”Œâ”€â”€â”€â”                â”Œâ”€â”€â”€â”
    â”‚ â–¡ â”‚ = SCRIPT       â”‚ â—‹ â”‚ = TERMINAL (sensor)
    â””â”€â”€â”€â”˜                â””â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”
    â”‚ â—† â”‚ = TERMINAL (actuator)
    â””â”€â”€â”€â”˜

    â”€â”€SUBâ”€â”€â–º  = Subgraph link (top-down)
    â”€â”€PORâ”€â”€â–º  = Sequence link (temporal)
```

---

## 5. M5 Stem Cell Evolution System

### 5.1 Three-Tier Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STEM CELL LIFECYCLE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   TIER 1: EXPLORATORY           TIER 2: PROBATIONARY    TIER 3: PERMANENT  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ DORMANT  â”‚                  â”‚  TRIAL   â”‚            â”‚  MATURE  â”‚       â”‚
â”‚   â”‚   (âšª)    â”‚                  â”‚   (ğŸŸ¡)    â”‚            â”‚   (ğŸŸ¢)    â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚        â”‚ activate                    â”‚                                     â”‚
â”‚        â–¼                             â”‚ XP â‰¥ 100                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º           â”‚
â”‚   â”‚EXPLORING â”‚                       â”‚                                     â”‚
â”‚   â”‚   (ğŸ”µ)    â”‚                       â”‚                                     â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                       â”‚ XP â‰¤ 0                              â”‚
â”‚        â”‚ â‰¥50 samples                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚        â–¼                             â”‚                         â”‚           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    consistency        â”‚                         â–¼           â”‚
â”‚   â”‚CANDIDATE â”‚â”€â”€â”€â”€â‰¥ 0.40 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚   (ğŸŸ£)    â”‚                       â”‚                    â”‚ DEMOTED  â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                    â”‚  (back   â”‚     â”‚
â”‚                                      â”‚                    â”‚   to ğŸ”µ)  â”‚     â”‚
â”‚                                      â–¼                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                               â”‚  PRUNED  â”‚                                 â”‚
â”‚                               â”‚   (ğŸ”´)    â”‚                                 â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 XP System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        XP MECHANICS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   INITIAL XP (promotion to TRIAL):     50                   â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    XP Changes                       â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚  Positive affordance delta    â”‚   +10 XP  (success) â”‚   â”‚
â”‚   â”‚  Negative affordance delta    â”‚   -10 XP  (failure) â”‚   â”‚
â”‚   â”‚  Each cycle (decay)           â”‚    -1 XP  (cost)    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚   THRESHOLDS:                                               â”‚
â”‚                                                             â”‚
â”‚        0                    50                   100        â”‚
â”‚        â”‚                    â”‚                     â”‚         â”‚
â”‚   â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–º    â”‚
â”‚        â”‚                    â”‚                     â”‚         â”‚
â”‚     DEMOTED              INITIAL              SOLIDIFY      â”‚
â”‚   (back to                 XP                 (become       â”‚
â”‚   EXPLORING)                                  MATURE)       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Recursive Branching (Vertical Growth)

```
                        BEFORE M5: FLAT TOPOLOGY
                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ kpk_detect â”‚ backbone
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ SUB                     â”‚ SUB                     â”‚ SUB
          â–¼                         â–¼                         â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Sensor1 â”‚              â”‚ Sensor2 â”‚              â”‚ Sensor3 â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     stem cell                stem cell                stem cell


                        AFTER M5: HIERARCHICAL TOPOLOGY
                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ kpk_detect â”‚ backbone
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ SUB
                                    â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  MATURE_1  â”‚ solidified parent
                              â”‚    (ğŸŸ¢)     â”‚ (100 XP achieved)
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUB           â”‚ SUB           â”‚ SUB
                    â–¼               â–¼               â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ TRIAL_A â”‚    â”‚ TRIAL_B â”‚    â”‚ TRIAL_C â”‚ spawned children
               â”‚   (ğŸŸ¡)   â”‚    â”‚   (ğŸŸ¡)   â”‚    â”‚   (ğŸŸ¡)   â”‚ (local_root = MATURE_1)
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    Children inherit parent's pattern_signature
                    Children link to parent, NOT backbone
                    Creates tactical reasoning trees
```

### 5.4 AND-Gate Hoisting

When two TRIAL cells correlate â‰¥85% in win co-activations, they are hoisted:

```
                        BEFORE HOISTING
                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ kpk_detect â”‚
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUB           â”‚ SUB           â”‚ SUB
                    â–¼               â–¼               â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ TRIAL_X â”‚    â”‚ TRIAL_Y â”‚    â”‚ TRIAL_Z â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        85% correlation detected
                        between X and Y
                              â”‚
                              â–¼

                        AFTER HOISTING
                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ kpk_detect â”‚
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUB                           â”‚ SUB
                    â–¼                               â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ cluster_001 â”‚ NEW            â”‚ TRIAL_Z â”‚
               â”‚  (AND gate) â”‚ aggregation=   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚             â”‚ "and" (min)
               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ SUB           â”‚ SUB
              â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ TRIAL_X â”‚    â”‚ TRIAL_Y â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         cluster_001 fires ONLY when
         BOTH X AND Y are active (min function)
```

---

## 6. Evolution Training Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EVOLUTION DRIVER FLOW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    CYCLE N (repeat per cycle)                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚          ONLINE PHASE                    â”‚                             â”‚
â”‚   â”‚          (Play games)                    â”‚                             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â”‚   for game in range(games_per_cycle):    â”‚                             â”‚
â”‚   â”‚       1. Generate position (curriculum)  â”‚                             â”‚
â”‚   â”‚       2. ReConEngine.step() microticks   â”‚                             â”‚
â”‚   â”‚       3. Stem cells collect samples      â”‚                             â”‚
â”‚   â”‚       4. TraceDB logs episode            â”‚                             â”‚
â”‚   â”‚       5. Track win/loss outcome          â”‚                             â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚       STRUCTURAL PHASE                   â”‚                             â”‚
â”‚   â”‚       (Analyze & grow)                   â”‚                             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â”‚   1. scan_for_affordance_spikes()        â”‚ â—„â”€ Find high-reward moments â”‚
â”‚   â”‚   2. find_high_impact_stem_cells()       â”‚ â—„â”€ Which cells fired?       â”‚
â”‚   â”‚   3. Promote CANDIDATE â†’ TRIAL           â”‚ â—„â”€ If consistency â‰¥ 0.40    â”‚
â”‚   â”‚   4. decay_xp() for all TRIAL cells      â”‚ â—„â”€ -1 XP per cycle          â”‚
â”‚   â”‚   5. check_solidification():             â”‚                             â”‚
â”‚   â”‚      â€¢ XP â‰¥ 100 â†’ MATURE (solidify)      â”‚                             â”‚
â”‚   â”‚      â€¢ XP â‰¤ 0  â†’ EXPLORING (demote)      â”‚                             â”‚
â”‚   â”‚   6. spawn_neighbors() for MATURE cells  â”‚ â—„â”€ Recursive outgrowth      â”‚
â”‚   â”‚   7. auto_hoist() correlated clusters    â”‚ â—„â”€ Create AND gates         â”‚
â”‚   â”‚   8. discover_por_chains()               â”‚ â—„â”€ Sequential patterns      â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                         â”‚                                                   â”‚
â”‚                         â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚         SNAPSHOT PHASE                   â”‚                             â”‚
â”‚   â”‚         (Save state)                     â”‚                             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â”‚   snapshots/evolution/{run}/{stage}/     â”‚                             â”‚
â”‚   â”‚       â”œâ”€â”€ cycle_NNNN.json   (topology)   â”‚                             â”‚
â”‚   â”‚       â””â”€â”€ stem_cells.json   (cell state) â”‚                             â”‚
â”‚   â”‚                                          â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚   â”‚  STAGE TRANSITION (if win_rate > threshold)                         â”‚   â”‚
â”‚   â”‚  â†’ Load next curriculum stage                                       â”‚   â”‚
â”‚   â”‚  â†’ Inherit topology from previous stage                             â”‚   â”‚
â”‚   â”‚  â†’ Inherit stem cells from previous stage                           â”‚   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Snapshot Data Format

### 7.1 cycle_NNNN.json

```json
{
  "nodes": {
    "kpk_root": {
      "id": "kpk_root",
      "type": "SCRIPT",
      "group": "backbone",
      "factory": null,
      "meta": {}
    },
    "TRIAL_stem_0001_5": {
      "id": "TRIAL_stem_0001_5",
      "type": "TERMINAL",
      "group": "trial",
      "factory": "recon_lite.learning.m5_structure:create_pattern_sensor",
      "meta": {
        "cell_id": "stem_0001",
        "xp": 75,
        "tier": "trial",
        "samples": 120,
        "consistency": 0.62
      },
      "transient": true
    }
  },
  "edges": {
    "kpk_root->kpk_detect:SUB": {
      "src": "kpk_root",
      "dst": "kpk_detect",
      "type": "SUB",
      "weight": 1.0
    },
    "kpk_detect->TRIAL_stem_0001_5:SUB": {
      "src": "kpk_detect",
      "dst": "TRIAL_stem_0001_5",
      "type": "SUB",
      "weight": 0.5
    }
  },
  "timestamp": "2026-01-05T14:17:16Z",
  "cycle": 5
}
```

### 7.2 stem_cells.json

```json
{
  "max_cells": 10,
  "spawn_rate": 0.05,
  "next_id": 15,
  "cells": {
    "stem_0001": {
      "cell_id": "stem_0001",
      "state": "TRIAL",
      "xp": 75,
      "xp_successes": 12,
      "xp_failures": 3,
      "trial_node_id": "TRIAL_stem_0001_5",
      "pattern_signature": [0.2, 0.8, 0.3, ...],
      "samples": [...]
    }
  },
  "win_coactivation": {
    "stem_0001|stem_0003": 45
  },
  "win_active_counts": {
    "stem_0001": 80,
    "stem_0003": 70
  }
}
```

---

## 8. Curriculum Stages (KPK)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KPK CURRICULUM PROGRESSION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Stage 0: SPRINTER                 Stage 6: ESCORT                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . P . . . â”‚ â†â”€ 7th rank   â”‚ . . . . P K . . â”‚ â†â”€ King support     â”‚
â”‚   â”‚ . . . . K . . . â”‚    Just push! â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . k . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . k . . . â”‚ â†â”€ King far   â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â”‚   Stage 9: KEY_SQUARES              Stage 12: ZUGZWANG                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . k . . . â”‚ â†â”€ Opposition â”‚ . . . k . . . . â”‚ â†â”€ Triangulation    â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . P . . . . â”‚                     â”‚
â”‚   â”‚ . . . . P . . . â”‚               â”‚ . . . K . . . . â”‚                     â”‚
â”‚   â”‚ . . . K . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â”‚ . . . . . . . . â”‚               â”‚ . . . . . . . . â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â”‚   PROGRESSION: 0 â†’ 1 â†’ 2 â†’ ... â†’ 12                                         â”‚
â”‚   â€¢ Each stage unlocks when win_rate > threshold (0.9 default)              â”‚
â”‚   â€¢ Topology and stem cells inherited between stages                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     COMPONENT INTERACTIONS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                        â”‚  evolution_driver â”‚                                â”‚
â”‚                        â”‚        .py        â”‚                                â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                 â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚                  â”‚                  â”‚                        â”‚
â”‚              â–¼                  â–¼                  â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ TopologyRegistry  â”‚ â”‚  ReConEngine  â”‚ â”‚ StemCellManager   â”‚             â”‚
â”‚   â”‚   (registry.py)   â”‚ â”‚  (engine.py)  â”‚ â”‚  (stem_cell.py)   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚             â”‚                   â”‚                   â”‚                        â”‚
â”‚             â”‚ load/save         â”‚ step()           â”‚ tick()                  â”‚
â”‚             â”‚ topology          â”‚                   â”‚ observe()              â”‚
â”‚             â–¼                   â–¼                   â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ kpk_topology.json â”‚ â”‚    Graph      â”‚ â”‚ stem_cells.json   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  (graph.py)   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                 â”‚                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚            â”‚            â”‚                              â”‚
â”‚                    â–¼            â–¼            â–¼                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚ kpk_root â”‚ â”‚  TRIAL   â”‚ â”‚  MATURE  â”‚                         â”‚
â”‚              â”‚ backbone â”‚ â”‚  cells   â”‚ â”‚  cells   â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                    â”‚            â”‚            â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                      â”‚  StructureLearner â”‚                                  â”‚
â”‚                      â”‚ (m5_structure.py) â”‚                                  â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                â”‚                                           â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚           â”‚                    â”‚                    â”‚                      â”‚
â”‚           â–¼                    â–¼                    â–¼                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚  Promote to   â”‚   â”‚  Hoist AND    â”‚   â”‚  Discover     â”‚                â”‚
â”‚   â”‚    TRIAL      â”‚   â”‚    gates      â”‚   â”‚  POR chains   â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Visualization Color Scheme

For generating visual representations:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VISUALIZATION COLORS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   NODE COLORS:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  Group   â”‚  Color            â”‚  Hex Code        â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚ backbone â”‚  Dark Gray        â”‚  #34495E         â”‚          â”‚
â”‚   â”‚ sensor   â”‚  Blue             â”‚  #3498DB         â”‚          â”‚
â”‚   â”‚ actuator â”‚  Orange           â”‚  #E67E22         â”‚          â”‚
â”‚   â”‚ trial    â”‚  Yellow           â”‚  #F1C40F         â”‚          â”‚
â”‚   â”‚ mature   â”‚  Purple           â”‚  #9B59B6         â”‚          â”‚
â”‚   â”‚ new      â”‚  Green            â”‚  #2ECC71         â”‚          â”‚
â”‚   â”‚ pruned   â”‚  Red              â”‚  #E74C3C         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚   NODE SHAPES:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚   â”‚  Type    â”‚  Shape            â”‚                             â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚   â”‚  SCRIPT  â”‚  Square (â–¡)       â”‚                             â”‚
â”‚   â”‚ TERMINAL â”‚  Circle (â—‹)       â”‚                             â”‚
â”‚   â”‚ actuator â”‚  Diamond (â—†)      â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                 â”‚
â”‚   EDGE COLORS:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  Type    â”‚  Color            â”‚  Style           â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚  SUB     â”‚  Gray             â”‚  Solid           â”‚          â”‚
â”‚   â”‚  POR     â”‚  Blue             â”‚  Dashed          â”‚          â”‚
â”‚   â”‚  new     â”‚  Green            â”‚  Bold            â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference Commands

```bash
# Quick evolution test
uv run python scripts/evolution_driver.py --quick

# Full stage run
uv run python scripts/evolution_driver.py --stage 5 --cycles 20

# All stages with high threshold
uv run python scripts/evolution_driver.py --all-stages --win-threshold 0.9

# Analyze results
uv run python scripts/analyze_training.py \
  --report-dir reports/evolution/latest/ --markdown
```

---

*Last updated: January 2026*
